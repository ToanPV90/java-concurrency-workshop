Make sure locks are released, no matter what happens in *critical section*.